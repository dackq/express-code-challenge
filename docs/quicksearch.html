<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules BookSchemaUserControllerUserRouter Modules × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-10-30T17:12:06+02:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules BookSchemaUserControllerUserRouter Old Bibliu Express Server Tech Test This code is my response to Bibliu's old tech test. It is an express server with a mongodb database and mongoose object modeling. Outline The database contains User, Institution and Book models which can be accessed by three routes defined by express: POST /users/signin: verifies user credentials with the passport library which then registers a session with express-session. POST /users/create: creates user with a name, email, role and password. At the time of saving, the user model will also use the registered email domain to associate users with their respective institution. GET /books: returns a list of books offered by each user's respective institution to the client. How to Use Clone this repository and run npm install in the directory. The server can be started with npm start. The server must have access to a MongoDB database, so, on the first, run a database url will be requested in the console. This information will be saved in a .env file so that it may be used on subsequent runs. If you would like to initialize the database with test data, use npm run db-init. You can then create a user using the domain names '@wikipodia.org' or '@uofn.org'. × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-10-30T17:12:06+02:00 using the DocStrap template. "},"module-BookSchema.html":{"id":"module-BookSchema.html","title":"Module: BookSchema","body":" Documentation Modules BookSchemaUserControllerUserRouter Module: BookSchema Schema for books Members &lt;inner&gt; author :string Type: string &lt;inner&gt; ISBN :string String of numbers used to identify the book. Type: string &lt;inner&gt; owner :mongoose.ObjectId Link to the institution who owns this book. Type: mongoose.ObjectId &lt;inner&gt; title :string Type: string × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-10-30T17:12:06+02:00 using the DocStrap template. "},"module-UserController.html":{"id":"module-UserController.html","title":"Module: UserController","body":" Documentation Modules BookSchemaUserControllerUserRouter Module: UserController Module containing functions which will be used by api routes to modify, create, or access user database model information. Methods &lt;static&gt; createUser(req, res) This creates a user. User details are sent on the req.body object and returned on the res.data object. If the request is invalid the res.success value will be 'fail'. Parameters: Name Type Description req object Http request for the route. Must include body property with new user credentials. Properties Name Type Description body.name string User's name body.email string User's email body.role string User's role body.password string User's password. Will be hashed on saving to the database. res object Http response object that will be used to send the response. Returns: res.data Type object &lt;static&gt; getUserBooks(req, res) This returns a list of books that the user can access based on their institution. Parameters: Name Type Description req object Http request for the route. Properties Name Type Description user string User data. Will be added to the req object by passport after authentication. res object Http response object that will be used to send the response. Returns: response object with success message and data property. Data will either contain the list of books or an error message depending on sucess. Type object × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-10-30T17:12:06+02:00 using the DocStrap template. "},"module-UserRouter.html":{"id":"module-UserRouter.html","title":"Module: UserRouter","body":" Documentation Modules BookSchemaUserControllerUserRouter Module: UserRouter Members &lt;inner&gt; SignIn :route Passport is used to authenticate user and will throw unauthorized if they are not authenticated. If they are authorized then this route will send a success message with the user's data Type: route × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-10-30T17:12:06+02:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
